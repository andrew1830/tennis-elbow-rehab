<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Tennis Elbow Rehab</title>
<style>
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:#f9fafb;min-height:100vh;padding:16px 16px 60px}
.wrap{max-width:600px;margin:0 auto}

/* Header */
.header{background:linear-gradient(135deg,#4f46e5,#7c3aed);border-radius:20px;padding:20px;color:#fff;margin-bottom:18px;box-shadow:0 4px 20px rgba(79,70,229,.3)}
.header h1{font-size:22px;font-weight:800;margin:6px 0 2px}
.header .sub{font-size:13px;color:rgba(255,255,255,.65);margin-bottom:10px}
.header .save-status{font-size:12px;margin-bottom:12px;min-height:18px}
.progress-label{display:flex;justify-content:space-between;font-size:14px;margin-bottom:6px}
.progress-track{background:rgba(99,102,241,.4);border-radius:999px;height:10px}
.progress-fill{background:#fff;border-radius:999px;height:10px;transition:width .4s}

/* Tabs */
.tabs{display:flex;gap:8px;margin-bottom:18px}
.tab{flex:1;padding:10px 4px;border-radius:12px;font-size:13px;font-weight:600;cursor:pointer;border:1px solid #e5e7eb;background:#fff;color:#6b7280;transition:all .15s}
.tab.active{background:#4f46e5;color:#fff;border-color:#4f46e5;box-shadow:0 2px 8px rgba(79,70,229,.3)}

/* Section label */
.section-label{font-weight:700;color:#374151;font-size:15px;margin-bottom:8px;margin-top:4px}
.section-note{font-size:12px;color:#9ca3af;margin-bottom:10px}

/* Phase cards */
.phase-card{border:2px solid;border-radius:16px;overflow:hidden;margin-bottom:12px}
.phase-header{padding:10px 16px;display:flex;justify-content:space-between;align-items:center;color:#fff}
.phase-header span{font-weight:700;font-size:14px}
.phase-header small{font-size:12px;opacity:.9}
.phase-prog-wrap{padding:6px 16px 0}
.phase-prog-track{background:rgba(255,255,255,.4);border-radius:999px;height:4px}
.phase-prog-fill{height:4px;border-radius:999px;transition:width .4s}
.phase-body{padding:8px 16px 14px}
.phase-ex{display:flex;justify-content:space-between;align-items:flex-start;gap:8px;margin-bottom:5px;font-size:13px;color:#374151}
.load-badge{background:#fff;border:1px solid #e5e7eb;border-radius:999px;padding:2px 10px;font-size:12px;font-weight:600;white-space:nowrap;flex-shrink:0}
.phase-note{font-size:12px;color:#6b7280;font-style:italic;margin-top:6px}

/* Week picker */
.week-grid{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:14px}
.week-btn{position:relative;padding:5px 11px;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;border:1px solid #e5e7eb;background:#fff;color:#6b7280;transition:all .15s}
.week-btn.active{color:#fff;border-color:transparent;box-shadow:0 2px 6px rgba(0,0,0,.2)}
.week-dot{position:absolute;top:-4px;right:-4px;width:10px;height:10px;background:#4ade80;border-radius:50%;border:2px solid white}

/* Calendar */
.cal-card{border:2px solid;border-radius:16px;overflow:hidden;margin-bottom:16px}
.cal-header{padding:10px 16px;display:flex;justify-content:space-between;color:#fff}
.cal-header span{font-weight:700}
.cal-header small{font-size:13px;opacity:.9}
.cal-body{padding:14px}
.cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:4px}
.cal-col{display:flex;flex-direction:column;align-items:center;gap:4px}
.cal-day-label{font-size:11px;font-weight:700;color:#6b7280}
.cal-btn{width:40px;height:40px;border-radius:10px;font-size:18px;font-weight:800;cursor:pointer;border:2px solid #d1d5db;background:#fff;color:#d1d5db;box-shadow:0 1px 4px rgba(0,0,0,.08);transition:all .15s}
.cal-btn.done{background:#22c55e;border-color:#22c55e;color:#fff}
.cal-rest{width:40px;height:40px;border-radius:10px;background:rgba(255,255,255,.4);display:flex;align-items:center;justify-content:center;font-size:10px;color:#9ca3af}
.cal-train-label{font-size:11px;color:#9ca3af}

/* Checklist */
.checklist{background:#fff;border:1px solid #e5e7eb;border-radius:16px;overflow:hidden;margin-bottom:8px;box-shadow:0 1px 4px rgba(0,0,0,.06)}
.check-row{display:flex;align-items:flex-start;gap:12px;padding:13px 16px;cursor:pointer;border-bottom:1px solid #f3f4f6;transition:background .15s;-webkit-user-select:none;user-select:none}
.check-row:last-child{border-bottom:none}
.check-row.checked{background:#f0fdf4}
.check-box{width:20px;height:20px;border-radius:6px;flex-shrink:0;border:2px solid #d1d5db;background:transparent;display:flex;align-items:center;justify-content:center;margin-top:2px;transition:all .15s}
.check-box.checked{background:#22c55e;border-color:#22c55e}
.check-box.checked::after{content:â€œâœ“â€;color:#fff;font-size:11px;font-weight:800}
.check-text{font-size:14px;color:#374151}
.check-text.checked{text-decoration:line-through;color:#9ca3af}
.check-when{font-size:11px;color:#9ca3af;margin-top:2px}
.reset-btn{font-size:12px;color:#9ca3af;background:none;border:none;cursor:pointer;text-decoration:underline;margin-bottom:20px;padding:0}

/* Load calculator */
.info-box{background:#eff6ff;border:1px solid #bfdbfe;border-radius:14px;padding:14px 16px;margin-bottom:16px}
.info-box h3{font-weight:700;color:#1e40af;margin-bottom:8px;font-size:14px}
.info-box ol{padding-left:18px;font-size:13px;color:#1d4ed8;line-height:1.9}
.info-box .tip{font-size:12px;color:#3b82f6;margin-top:8px;font-style:italic}
.warn-box{background:#fffbeb;border:1px solid #fde68a;border-radius:14px;padding:14px 16px;margin-bottom:16px;font-size:13px;color:#92400e}
.unit-toggle{display:flex;align-items:center;gap:10px;margin-bottom:16px}
.unit-toggle span{font-size:13px;font-weight:600;color:#6b7280}
.unit-btn{padding:6px 18px;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;border:1px solid #e5e7eb;background:#fff;color:#6b7280;transition:all .15s}
.unit-btn.active{background:#4f46e5;color:#fff;border-color:#4f46e5}
.ex-card{background:#fff;border:1px solid #e5e7eb;border-radius:16px;padding:16px;margin-bottom:12px;box-shadow:0 1px 4px rgba(0,0,0,.06)}
.ex-card h4{font-weight:700;font-size:14px;color:#111827;margin-bottom:2px}
.ex-card .how{font-size:12px;color:#9ca3af;font-style:italic;margin-bottom:12px}
.ex-card label{font-size:11px;font-weight:700;color:#6b7280;text-transform:uppercase;letter-spacing:.06em}
.input-row{display:flex;gap:8px;align-items:center;margin:6px 0 12px}
.input-row input{border:1px solid #d1d5db;border-radius:8px;padding:8px 12px;font-size:14px;width:120px;outline:none;font-family:inherit}
.input-row input:focus{border-color:#4f46e5}
.input-row span{font-size:13px;color:#6b7280}
.result-good{background:#f0fdf4;border:1px solid #86efac;border-radius:12px;padding:12px 16px;display:flex;justify-content:space-between;align-items:center}
.result-good .big{font-size:28px;font-weight:800;color:#15803d}
.result-good .big span{font-size:14px;font-weight:400}
.result-good .label{font-size:11px;font-weight:700;color:#16a34a;text-transform:uppercase;letter-spacing:.06em}
.result-good .side{text-align:right;font-size:12px;color:#4ade80}
.result-empty{background:#f9fafb;border:1px solid #e5e7eb;border-radius:12px;padding:12px 16px;font-size:13px;color:#9ca3af;font-style:italic}

/* Rules */
.rule-card{display:flex;gap:14px;padding:14px 16px;background:#fff;border:1px solid #e5e7eb;border-radius:16px;margin-bottom:10px;box-shadow:0 1px 4px rgba(0,0,0,.06)}
.rule-icon{font-size:26px;flex-shrink:0}
.rule-title{font-weight:700;font-size:14px;color:#111827;margin-bottom:3px}
.rule-desc{font-size:13px;color:#6b7280;line-height:1.6}

/* Footer */
.footer{text-align:center;margin-top:24px}
.danger-btn{font-size:12px;color:#fca5a5;background:none;border:none;cursor:pointer;text-decoration:underline}
.footer-note{font-size:11px;color:#d1d5db;margin-top:10px}
</style>

</head>
<body>
<div class="wrap" id="app"></div>

<script>
// â”€â”€â”€ Data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const STORAGE_KEY = "te-rehab-v4";
const WEEKS = 12;
const DAYS = ["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];
const TRAIN_DAYS = [0,2,4];

const PHASES = [
  {
    label:"Phase 1: Foundation", weeks:"Weeks 1â€“3", range:[1,3],
    bg:"#dbeafe", border:"#93c5fd", hdr:"#3b82f6",
    exercises:[
      {id:"ext", name:"Wrist Extension Isometric", sets:"3 sets Ã— 30s"},
    ],
    note:"One exercise only. Focus on form and finding your working weight. Pain up to 4/10 is OK.",
  },
  {
    label:"Phase 2: Build", weeks:"Weeks 4â€“7", range:[4,7],
    bg:"#fef3c7", border:"#fcd34d", hdr:"#f59e0b",
    exercises:[
      {id:"ext", name:"Wrist Extension Isometric", sets:"4 sets Ã— 30s"},
      {id:"sup", name:"Wrist Supination Isometric", sets:"3 sets Ã— 30s"},
    ],
    note:"Add second exercise. Increase weight if 30s feels easy. Check pain baseline each morning.",
  },
  {
    label:"Phase 3: Strengthen", weeks:"Weeks 8â€“12", range:[8,12],
    bg:"#dcfce7", border:"#86efac", hdr:"#22c55e",
    exercises:[
      {id:"ext",  name:"Wrist Extension Isometric",  sets:"4â€“5 sets Ã— 30s"},
      {id:"sup",  name:"Wrist Supination Isometric", sets:"3â€“4 sets Ã— 30s"},
      {id:"grip", name:"Grip/Forearm Isometric Hold", sets:"3 sets Ã— 30s"},
    ],
    note:"All three exercises. Reintroduce light pickleball when pain is consistently â‰¤2/10.",
  },
];

const CHECKLIST = [
  {id:"c1", label:"Take 15g collagen/gelatin + 225mg vitamin C", when:"30â€“60 min before"},
  {id:"c2", label:"Warm up forearm â€” light wrist circles for 2 min", when:"Before exercises"},
  {id:"c3", label:"Wrist Extension Isometric â€” 30s hold, 60s rest Ã— sets", when:"Main exercise"},
  {id:"c4", label:"Wrist Supination Isometric â€” 30s hold, 60s rest Ã— sets", when:"Phase 2+ only"},
  {id:"c5", label:"Grip/Forearm Hold â€” 30s hold, 60s rest Ã— sets", when:"Phase 3 only"},
  {id:"c6", label:"Rate pain during session (target: â‰¤4/10)", when:"During training"},
  {id:"c7", label:"Check pain next morning â€” should be at baseline or better", when:"Next morning"},
];

const RULES = [
  {icon:"â±ï¸", title:"30-second holds", desc:"Every set must be a full 30 seconds â€” the minimum for the tendon stress-relaxation response that triggers healing. Don't cut sets short."},
  {icon:"ğŸ’ª", title:"~70% of max effort", desc:"Holds must be genuinely hard. Light holds don't give enough stimulus to trigger tendon remodeling. Use the Load Calculator tab to find your exact training weight."},
  {icon:"ğŸ“…", title:"Every other day only", desc:"Train Mon/Wed/Fri. Rest days are not optional â€” net collagen synthesis peaks ~36 hours after loading, so off days are when the tendon actually rebuilds."},
  {icon:"ğŸ˜¬", title:"Pain up to 4/10 is OK", desc:"Some discomfort during the hold is acceptable. The key rule: pain must return to baseline within 24 hours. If it's worse the next morning, reduce load or sets."},
  {icon:"ğŸ‹", title:"Collagen + vitamin C first", desc:"Take 15g gelatin + 225mg vitamin C 30â€“60 minutes before training. Exercise drives the amino acids to the tendon â€” timing matters."},
  {icon:"ğŸ“", title:"Reduce pickleball volume", desc:"Fast explosive loading (backhands, hard dinking, smashes) prevents healing. Significantly cut back â€” especially any motion that provokes pain."},
  {icon:"ğŸ“ˆ", title:"Progress takes time", desc:"Expect 6â€“12 weeks for meaningful improvement. Research showed full tendon remodeling in as little as 2 months when the protocol was followed correctly."},
  {icon:"ğŸ”", title:"Advance your weight regularly", desc:"Re-test your max every 2â€“3 weeks and update your numbers in the Load Calculator. When 30 seconds starts feeling easy, it's time to add weight."},
];

// â”€â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

let state = {
  tab: "tracker",
  currentWeek: 1,
  sessionLog: {},
  checkedItems: {},
  loads: {ext:"", sup:"", grip:"", unit:"lbs"},
};

function loadState() {
  try {
    const raw = localStorage.getItem(STORAGE_KEY);
    if (raw) {
      const saved = JSON.parse(raw);
      state = {...state, ...saved, tab: "tracker"};
    }
  } catch(_) {}
}

function saveState() {
  try {
    const toSave = {
      currentWeek: state.currentWeek,
      sessionLog: state.sessionLog,
      checkedItems: state.checkedItems,
      loads: state.loads,
    };
    localStorage.setItem(STORAGE_KEY, JSON.stringify(toSave));
    return true;
  } catch(_) {
    return false;
  }
}

// â”€â”€â”€ Render â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function phaseFor(week) {
  return PHASES.find(p => week >= p.range[0] && week <= p.range[1]) || PHASES[2];
}

let lastSaved = null;
let saveTimer = null;

function scheduleSave() {
  clearTimeout(saveTimer);
  saveTimer = setTimeout(() => {
    const ok = saveState();
    if (ok) {
      lastSaved = new Date().toLocaleString(undefined,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});
    }
    render();
  }, 300);
}

function setState(patch) {
  Object.assign(state, patch);
  scheduleSave();
  render();
}

function render() {
  const app = document.getElementById("app");
  app.innerHTML = buildHTML();
  attachEvents();
}

function buildHTML() {
  const phase = phaseFor(state.currentWeek);
  const total = WEEKS * TRAIN_DAYS.length;
  const done  = Object.values(state.sessionLog).filter(Boolean).length;
  const pct   = Math.round((done / total) * 100);

  const saveStatusHTML = lastSaved
    ? `<span style="color:#86efac">âœ“ Saved Â· ${lastSaved}</span>`
    : `<span style="color:rgba(255,255,255,.6)">Saves automatically to this browser</span>`;

  return `
    ${buildHeader(done, total, pct, saveStatusHTML)}
    ${buildTabs()}
    ${state.tab === "tracker" ? buildTracker(phase) : ""}
    ${state.tab === "load"    ? buildLoad()         : ""}
    ${state.tab === "rules"   ? buildRules()        : ""}
    <div class="footer">
      <button class="danger-btn" onclick="resetAll()">Reset all progress</button>
      <p class="footer-note">Not medical advice. If pain worsens after 4â€“6 weeks, see a physical therapist.</p>
    </div>
  `;
}

function buildHeader(done, total, pct, statusHTML) {
  return `
    <div class="header">
      <div style="display:flex;align-items:center;gap:12px">
        <span style="font-size:32px">ğŸ¾</span>
        <h1>Tennis Elbow Rehab Plan</h1>
      </div>
      <p class="sub">Lateral Epicondylitis Â· Isometric Protocol Â· 12 Weeks</p>
      <div class="save-status">${statusHTML}</div>
      <div class="progress-label">
        <span>Overall Progress</span>
        <span>${done} / ${total} sessions Â· ${pct}%</span>
      </div>
      <div class="progress-track">
        <div class="progress-fill" style="width:${pct}%"></div>
      </div>
    </div>`;
}

function buildTabs() {
  return `
    <div class="tabs">
      <button class="tab ${state.tab==="tracker"?"active":""}" onclick="setTab('tracker')">ğŸ“… Tracker</button>
      <button class="tab ${state.tab==="load"?"active":""}"    onclick="setTab('load')">ğŸ‹ï¸ My Loads</button>
      <button class="tab ${state.tab==="rules"?"active":""}"   onclick="setTab('rules')">ğŸ“Œ Rules</button>
    </div>`;
}

function buildTracker(phase) {
  return `
    <p class="section-label">Phases</p>
    ${PHASES.map(p => buildPhaseCard(p)).join("")}
    <p class="section-label" style="margin-top:8px">Week Tracker</p>
    <p class="section-note">Select your current week, then tap training days to mark them done.</p>
    ${buildWeekPicker()}
    ${buildCalendar(phase)}
    <p class="section-label">Session Checklist</p>
    <p class="section-note">Run through this on every training day.</p>
    ${buildChecklist()}
    <button class="reset-btn" onclick="resetChecklist()">Reset checklist for next session</button>
  `;
}

function buildPhaseCard(p) {
  const ptotal = (p.range[1]-p.range[0]+1)*TRAIN_DAYS.length;
  const pdone  = Object.entries(state.sessionLog).filter(([k,v])=>{
    const w=parseInt(k.split("-")[0]); return v&&w>=p.range[0]&&w<=p.range[1];
  }).length;
  const pp = Math.round((pdone/ptotal)*100);
  const exHTML = p.exercises.map(ex => {
    const sv = state.loads[ex.id];
    const badge = sv ? `<span class="load-badge">${sv} ${state.loads.unit}</span>` : "";
    return `<div class="phase-ex"><span>â†’ ${ex.name} â€” ${ex.sets}</span>${badge}</div>`;
  }).join("");
  return `
    <div class="phase-card" style="border-color:${p.border};background:${p.bg}">
      <div class="phase-header" style="background:${p.hdr}">
        <span>${p.label}</span><small>${p.weeks} Â· ${pdone}/${ptotal}</small>
      </div>
      <div class="phase-prog-wrap">
        <div class="phase-prog-track">
          <div class="phase-prog-fill" style="background:${p.hdr};width:${pp}%"></div>
        </div>
      </div>
      <div class="phase-body">${exHTML}<p class="phase-note">${p.note}</p></div>
    </div>`;
}

function buildWeekPicker() {
  const btns = Array.from({length:WEEKS},(_,i)=>i+1).map(w => {
    const wp   = phaseFor(w);
    const full = TRAIN_DAYS.filter(d=>state.sessionLog[`${w}-${d}`]).length===TRAIN_DAYS.length;
    const sel  = w===state.currentWeek;
    const dot  = full ? `<span class="week-dot"></span>` : "";
    return `<button class="week-btn ${sel?"active":""}" style="${sel?`background:${wp.hdr};border-color:${wp.hdr}`:""}" onclick="setWeek(${w})">W${w}${dot}</button>`;
  }).join("");
  return `<div class="week-grid">${btns}</div>`;
}

function buildCalendar(phase) {
  const cols = DAYS.map((day,di)=>{
    const train = TRAIN_DAYS.includes(di);
    const done  = state.sessionLog[`${state.currentWeek}-${di}`];
    if (train) {
      return `
        <div class="cal-col">
          <span class="cal-day-label">${day}</span>
          <button class="cal-btn ${done?"done":""}" onclick="toggleSession(${state.currentWeek},${di})">${done?"âœ“":"â—‹"}</button>
          <span class="cal-train-label">train</span>
        </div>`;
    } else {
      return `
        <div class="cal-col">
          <span class="cal-day-label">${day}</span>
          <div class="cal-rest">rest</div>
        </div>`;
    }
  }).join("");
  return `
    <div class="cal-card" style="border-color:${phase.border}">
      <div class="cal-header" style="background:${phase.hdr}">
        <span>Week ${state.currentWeek}</span><small>${phase.label}</small>
      </div>
      <div class="cal-body">
        <div class="cal-grid">${cols}</div>
      </div>
    </div>`;
}

function buildChecklist() {
  const rows = CHECKLIST.map(item => {
    const checked = state.checkedItems[item.id];
    return `
      <div class="check-row ${checked?"checked":""}" onclick="toggleCheck('${item.id}')">
        <div class="check-box ${checked?"checked":""}"></div>
        <div>
          <p class="check-text ${checked?"checked":""}">${item.label}</p>
          <p class="check-when">${item.when}</p>
        </div>
      </div>`;
  }).join("");
  return `<div class="checklist">${rows}</div>`;
}

function buildLoad() {
  const unit = state.loads.unit;
  const exCards = [
    {id:"ext",  icon:"ğŸ’ª", label:"Wrist Extension Isometric",  how:"Forearm on table, palm down, hand off edge. Extend wrist upward against weight."},
    {id:"sup",  icon:"ğŸ”„", label:"Wrist Supination Isometric", how:"Elbow at 90Â°, arm at side. Hold a hammer/dumbbell and resist rotation (keep palm up)."},
    {id:"grip", icon:"âœŠ", label:"Grip / Forearm Hold",         how:"Squeeze a thick dumbbell handle or weight at max effort. Track heaviest held for 5 seconds."},
  ].map(ex => {
    const raw   = state.loads[ex.id] || "";
    const max   = parseFloat(raw);
    const valid = !isNaN(max) && max > 0;
    const t70   = valid ? Math.round(max * 0.70 * 2) / 2 : null;
    const result = valid
      ? `<div class="result-good">
           <div>
             <p class="label">Your 70% Training Target</p>
             <p class="big">${t70} <span>${unit}</span></p>
           </div>
           <div class="side"><p>Max: ${max} ${unit}</p><p>â†’ ${t70} ${unit}</p></div>
         </div>`
      : `<div class="result-empty">Enter your max above to calculate your training weight.</div>`;
    return `
      <div class="ex-card">
        <h4>${ex.icon} ${ex.label}</h4>
        <p class="how">${ex.how}</p>
        <label>My max (${unit})</label>
        <div class="input-row">
          <input type="number" min="0" step="0.5" value="${raw}" placeholder="${unit==="lbs"?"e.g. 20":"e.g. 10"}" oninput="setLoad('${ex.id}',this.value)"/>
          <span>${unit}</span>
        </div>
        ${result}
      </div>`;
  }).join("");

  return `
    <div class="info-box">
      <h3>How to Find Your Max (One-Time Test)</h3>
      <ol>
        <li>Pick up a dumbbell in your injured hand.</li>
        <li>Rest forearm on a table, hand off edge, palm down.</li>
        <li>Extend wrist upward and hold for <strong>5 seconds</strong> at max effort.</li>
        <li>If easy â†’ increase weight. Can't hold â†’ decrease.</li>
        <li>Heaviest weight held with good form for 5s = your max.</li>
        <li>Training target = <strong>70% of that number</strong> (calculated below).</li>
      </ol>
      <p class="tip">Re-test every 2â€“3 weeks as you get stronger and update below.</p>
    </div>
    <div class="unit-toggle">
      <span>Units:</span>
      <button class="unit-btn ${unit==="lbs"?"active":""}" onclick="setUnit('lbs')">lbs</button>
      <button class="unit-btn ${unit==="kg"?"active":""}"  onclick="setUnit('kg')">kg</button>
    </div>
    ${exCards}
    <div class="warn-box">
      <strong>ğŸ“ˆ Progress tip:</strong> Re-test every 2â€“3 weeks. When your max goes up, update it here and your training target updates automatically.
    </div>`;
}

function buildRules() {
  return RULES.map(r => `
    <div class="rule-card">
      <div class="rule-icon">${r.icon}</div>
      <div>
        <p class="rule-title">${r.title}</p>
        <p class="rule-desc">${r.desc}</p>
      </div>
    </div>`).join("");
}

// â”€â”€â”€ Event handlers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function attachEvents() {
  // Events are attached via inline onclick â€” nothing extra needed
}

function setTab(t)    { state.tab = t; render(); }
function setWeek(w)   { setState({currentWeek:w}); }

function toggleSession(week, di) {
  const key = `${week}-${di}`;
  const next = {...state.sessionLog, [key]: !state.sessionLog[key]};
  setState({sessionLog: next});
}

function toggleCheck(id) {
  const next = {...state.checkedItems, [id]: !state.checkedItems[id]};
  setState({checkedItems: next});
}

function resetChecklist() {
  setState({checkedItems: {}});
}

function setLoad(id, val) {
  setState({loads: {...state.loads, [id]: val}});
}

function setUnit(u) {
  setState({loads: {...state.loads, unit: u}});
}

function resetAll() {
  if (!confirm("Reset ALL progress? This cannot be undone.")) return;
  lastSaved = null;
  state.currentWeek = 1;
  state.sessionLog  = {};
  state.checkedItems = {};
  state.loads = {ext:"", sup:"", grip:"", unit:"lbs"};
  saveState();
  render();
}

// â”€â”€â”€ Boot â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

loadState();
render();
</script>

</body>
</html>
